<div class="auth-container">
  <p-card styleClass="auth-card">
    <div class="auth-form">
      <h2>{{ title }}</h2>
      <p>{{ subtitle }}</p>

      @if(errorMessage) {
        <div class="error-message">
          {{ errorMessage }}
        </div>
      }

      <form [formGroup]="registroForm" (ngSubmit)="onRegistro()">
        <div class="form-field">
          <label for="username">Nombre de Usuario</label>
          <input id="username" type="text" pInputText formControlName="username" class="w-full"placeholder="Elige un nombre de usuario"/>
          @if(registroForm.get('username')?.invalid && registroForm.get('username')?.touched) {
            <small class="p-error">Usuario es obligatorio (mínimo 3 caracteres)</small>
          }
        </div>

        <div class="form-field">
          <label for="nickname">Apodo/Nickname</label>
          <input id="nickname" type="text" pInputText formControlName="nickname" class="w-full"placeholder="Ingresa un apodo o nickname"/>
          @if(registroForm.get('nickname')?.invalid && registroForm.get('nickname')?.touched) {
            <small class="p-error">Nickname es obligatorio</small>
          }
        </div>

        <div class="form-field">
          <label for="email">Correo Electrónico</label>
          <input id="email" type="email" pInputText formControlName="email" class="w-full"placeholder="Ingresa tu correo electrónico"/>
          @if(registroForm.get('email')?.invalid && registroForm.get('email')?.touched) {
            <small class="p-error">Correo electrónico válido es obligatorio</small>
          }
        </div>

        <div class="form-field">
          <label for="password">Contraseña</label>
          <input id="password" type="password" pInputText formControlName="password"class="w-full"placeholder="Elige una contraseña"/>
          @if(registroForm.get('password')?.invalid && registroForm.get('password')?.touched) {
            <small class="p-error">Contraseña es obligatoria (mínimo 8 caracteres)</small>
          }
        </div>

        <div class="form-field">
          <label for="perfil">Tipo de Usuario</label>
          <p-dropdown id="perfil" [options]="perfilOptions" formControlName="perfil"placeholder="Selecciona el tipo de usuario" styleClass="w-full"></p-dropdown>
        </div>

        <div class="form-field button-container">
          <button pButton type="submit" label="Registrarse" [loading]="loading"[disabled]="registroForm.invalid" class="auth-button w-full"></button>
        </div>
      </form>

      <div class="links-container">
        <a [routerLink]="['/login']" class="auth-link">¿Ya tienes una cuenta? Inicia sesión</a>
      </div>
    </div>
  </p-card>
</div>
