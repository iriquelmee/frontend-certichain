<div class="grid" style="margin-bottom: 1rem;">
    <div class="col-12">
        <p-card>
            <div class="col-12">
                <h2>{{ this.title }}</h2>
            </div>
        
            <div *ngIf="selectedRequest" class="upload-panel">
                <h3>Cargar documento</h3>
                <form [formGroup]="uploadForm" (ngSubmit)="onUploadSubmit()">
                    <div>
                        <label>ID Registro</label>
                        <input formControlName="requestId" readonly />
                    </div>
                    <div>
                        <label>Solicitante</label>
                        <input formControlName="requesterId" readonly />
                    </div>
                    <div>
                        <label>Tipo Documento</label>
                        <input formControlName="documentTypeId" readonly />
                    </div>
                    <div>
                        <label>Archivo</label>
                        <input type="file" (change)="onFileChange($event)" />
                    </div>
                    <div class="buttons">
                        <button type="submit" [disabled]="uploadForm.invalid">Enviar</button>
                        <button type="button" (click)="onCancelUpload()">Cancelar</button>
                    </div>
                </form>
            </div>
        
            <div class="col-8">
                <form [formGroup]="searchForm" class="search-form">
                    <div class="fields">
                        <label>
                            Inicio
                            <p-datepicker 
                                formControlName="inicio" 
                                [showIcon]="true" 
                                [iconDisplay]="'input'" 
                                placeholder="Seleccione Fecha Inicio"
                                dateFormat="dd/mm/yy"
                                [showButtonBar]="true"
                                inputId="inicio">
                            </p-datepicker>
                        </label>
                        <label>
                            Fin
                            <p-datepicker 
                                formControlName="fin" 
                                [showIcon]="true" 
                                [iconDisplay]="'input'" 
                                placeholder="Seleccione Fecha Fin"
                                dateFormat="dd/mm/yy"
                                [showButtonBar]="true"
                                inputId="fin">
                            </p-datepicker>
                        </label>
        
                        <custom-button 
                            label="Buscar" 
                            type="primary" 
                            (onClick)="onSearch()"
                            style="margin-top: 1rem;">
                        </custom-button>
                    </div>
                </form>
        
            </div>
        </p-card>
    </div>
</div>

<div class="grid" style="margin-bottom: 1rem;">
    <div class="col-12">
        <p-card>
            <div class="grid">
                @if(results.length === 0){
                    <div class="text-center p-5">
                        <div class="flex align-items-center justify-content-center flex-column">
                            <i class="pi pi-info-circle text-5xl mb-3 text-500"></i>
                            <p class="text-xl text-500 mb-0">No se encontraron registros.</p>
                        </div>
                    </div>
                }
                @else if(results.length > 0){
                    <app-table [data]="results" [columns]="requestColumns" [showActions]="true" (onToggleActive)="handleTableAction($event)" [rows]="10"></app-table>
                }
            </div>
        </p-card>
    </div>
</div>