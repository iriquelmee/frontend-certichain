<div class="grid" style="margin-bottom: 1rem;">
    <div class="col-12">
        <p-card>
            <h2>{{ this.title }}</h2>

            <p>Solicite aquí certificados.</p>

            <form [formGroup]="requestForm" class="form-block">
                <label>
                Institución
                    <app-select
                        formControlName="institution"
                        [options]="institutions"
                        optionLabel="name"
                        optionValue="userID"
                        placeholder="-- selecciona --"
                        (valueChange)="getInstitutionDocTypes()">
                    </app-select>
                </label>
            
                <label>
                    Documento
                    <app-select
                        formControlName="documentType"
                        [options]="documentsType"
                        optionLabel="name"
                        optionValue="id"
                        placeholder="-- selecciona --">
                    </app-select>
                </label>
            
                <custom-button 
                    label="Solicitar" 
                    type="primary" 
                    (onClick)="onSolicitar()"
                    style="margin-top: 1rem;">
                </custom-button>
            </form>           
        </p-card>
    </div>
</div>

<div class="grid" style="margin-bottom: 1rem;">
    <div class="col-12">
        <p-card>
            <h2>Buscar</h2>

            <p>Busque aquí certificados.</p>

            <form [formGroup]="searchForm" class="search-form">
                <div class="fields">
                    <label>
                        Emisor
                        <app-select
                        formControlName="emisor"
                        [options]="institutions"
                        optionLabel="name"
                        optionValue="id"
                        placeholder="-- emisor --">
                        </app-select>
                    </label>
        
                    <label>
                    Inicio
                    <p-datepicker 
                        formControlName="inicio" 
                        [showIcon]="true" 
                        [iconDisplay]="'input'" 
                        placeholder="Seleccione Fecha Inicio"
                        dateFormat="dd/mm/yy"
                        [showButtonBar]="true"
                        inputId="inicio">
                    </p-datepicker>
                    </label>
        
                    <label>
                    Fin
                    <p-datepicker 
                        formControlName="fin" 
                        [showIcon]="true" 
                        [iconDisplay]="'input'" 
                        placeholder="Seleccione Fecha Fin"
                        dateFormat="dd/mm/yy"
                        [showButtonBar]="true"
                        inputId="fin">
                    </p-datepicker>
                    </label>
                    
                    <custom-button 
                    label="Buscar" 
                    type="primary" 
                    (onClick)="onSearch()"
                    style="margin-top: 1rem;">
                </custom-button>
                </div>
            </form>
        </p-card>
    </div>
</div>

<div class="grid" style="margin-bottom: 1rem;">
    <div class="col-12">
        <p-card>
            <div class="grid">
                @if(results.length === 0){
                    <div class="text-center p-5">
                        <div class="flex align-items-center justify-content-center flex-column">
                            <i class="pi pi-info-circle text-5xl mb-3 text-500"></i>
                            <p class="text-xl text-500 mb-0">No se encontraron registros.</p>
                        </div>
                    </div>
                }
                @else if (results.length > 0){
                    <app-table [data]="results" [columns]="requestColumns" [showActions]="false" [rows]="10"> </app-table>
                }
            </div>
        </p-card>
    </div>
</div>